<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.miscorf.dao.PayMapper">
    <insert id="creatPay"  parameterType="Pay" useGeneratedKeys="true" keyProperty="pay_table_id" >
        insert into community.pay_table
        (pay_title,pay_content,pay_money,pay_creator,create_time,deadline)
        values (#{pay_title},#{pay_content},#{pay_money},#{pay_creator},#{create_time},#{deadline});
    </insert>
    <insert id="creatPayUsers"  parameterType="pay" >
        insert into community.pay
        (pay_table_id,user_name,is_pay)
        values (#{pay_table_id},#{user_name},false)

    </insert>
    <select id="selectPay" resultType="Pay">
        select * from community.pay_table  where user_name=#{user_name};
    </select>
    <select id="getAllPay" parameterType="Pay" resultType="Pay">
        select * from community.pay_table
        limit #{begin_num},#{page_size}
    </select><select id="getUserPayTable" parameterType="Pay" resultType="Pay">
        select * from community.pay_table  where user_name=#{user_name}
         limit #{begin_num},#{page_size}
    </select>
    <select id="getUserPayByName"  resultType="Pay">
        SELECT pay_title,pay_content,pay_money,pay_creator,create_time,deadline,is_pay FROM pay,pay_table
        WHERE user_name =#{user_name} and pay.pay_table_id=pay_table.pay_table_id
        limit #{begin_num},#{page_size}
    </select>

</mapper>
